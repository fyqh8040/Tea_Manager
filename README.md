
# ğŸƒ èŒ¶éŸµå…¸è— (Tea Collection Manager)

> **ä¸€æ¬¾ä¸“ä¸ºèŒ¶å‹æ‰“é€ çš„ç°ä»£åŒ–ã€ç§æœ‰åŒ–è—å“ç®¡ç†ç³»ç»Ÿã€‚**

[![Deployed with Vercel](https://vercel.com/button)](https://vercel.com/new)

## ğŸ“– é¡¹ç›®ç®€ä»‹

**èŒ¶éŸµå…¸è—** æ˜¯ä¸€ä¸ªå…¨æ ˆ Web åº”ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©èŒ¶å¶çˆ±å¥½è€…å’Œè—å®¶æ•°å­—åŒ–ç®¡ç†è‡ªå·±çš„åº“å­˜ã€‚ä¸åŒäºé€šç”¨çš„åº“å­˜è½¯ä»¶ï¼Œå®ƒé’ˆå¯¹â€œèŒ¶â€ä¸â€œå™¨â€è¿›è¡Œäº†ä¸“é—¨çš„å­—æ®µè®¾è®¡ï¼ˆå¦‚å¹´ä»½ã€äº§åœ°ã€å·¥è‰ºï¼‰ï¼Œå¹¶æä¾›äº†ä¼˜é›…çš„è§†è§‰ä½“éªŒã€‚

æœ¬é¡¹ç›®é‡‡ç”¨ **å‰åç«¯åˆ†ç¦»** æ¶æ„ï¼Œå‰ç«¯åŸºäº React 18 æ‰“é€ æ²‰æµ¸å¼ä½“éªŒï¼Œåç«¯é€šè¿‡ Serverless API (Node.js) ç›´æ¥ä¸ PostgreSQL æ•°æ®åº“äº¤äº’ï¼Œç¡®ä¿äº†æ•°æ®çš„ç§å¯†æ€§ä¸å®‰å…¨æ€§ã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

*   **åŒæ¨¡å¼ç®¡ç†**ï¼šä¸“é—¨é’ˆå¯¹ **èŒ¶å“**ï¼ˆæ¶ˆè€—å“ï¼Œå•ä½ï¼šå…‹/é¥¼ç­‰ï¼‰ä¸ **èŒ¶å™¨**ï¼ˆå›ºå®šèµ„äº§ï¼Œå•ä½ï¼šä»¶/å¥—ï¼‰è®¾è®¡çš„ä¸åŒæ•°æ®ç»“æ„ã€‚
*   **åº“å­˜æµæ°´è¿½è¸ª**ï¼šä¸ä»…ä»…æ˜¯è®°å½•æ•°é‡ï¼Œè¿˜èƒ½è®°å½•æ¯ä¸€æ¬¡â€œå“é¥®â€ã€â€œè´­å…¥â€ã€â€œèµ äºˆâ€æˆ–â€œç›˜äºâ€çš„è¯¦ç»†æµæ°´ä¸å¤‡æ³¨ã€‚
*   **å¤šç”¨æˆ·ä½“ç³»**ï¼š
    *   **ç®¡ç†å‘˜**ï¼šæ‹¥æœ‰ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œå¯ç®¡ç†æ‰€æœ‰ç”¨æˆ·ã€ä¿®æ”¹ä»»æ„æ˜µç§°ã€‚
    *   **æ™®é€šè—å®¶**ï¼šæ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®ç©ºé—´ï¼Œæ•°æ®äº’ä¸å¯è§ã€‚
*   **å…¨è‡ªåŠ¨åˆå§‹åŒ–**ï¼šåˆ©ç”¨åç«¯ç›´è¿æ•°æ®åº“èƒ½åŠ›ï¼Œå†…ç½®è¿ç§»è„šæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡Œ SQLï¼Œé€šè¿‡ç•Œé¢å³å¯ä¸€é”®ä¿®å¤/åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ã€‚
*   **æ™ºèƒ½è”æƒ³**ï¼šè¾“å…¥äº§åœ°æˆ–åˆ†ç±»æ—¶æä¾›æ™ºèƒ½è¡¥å…¨ï¼ˆå¦‚ï¼šæ˜“æ­¦ã€æ™¯å¾·é•‡ã€ç´«ç ‚å£¶ç­‰ï¼‰ã€‚
*   **å›¾åºŠæ”¯æŒ**ï¼šé»˜è®¤æ”¯æŒ Base64 æ•°æ®åº“å­˜å‚¨ï¼ŒåŒæ—¶å…¼å®¹ [CloudFlare-ImgBed](https://github.com/MarSeventh/CloudFlare-ImgBed) ç­‰å¤–éƒ¨å›¾åºŠ APIã€‚
*   **ç§»åŠ¨ç«¯é€‚é…**ï¼šå®Œç¾é€‚é…æ‰‹æœºä¸æ¡Œé¢ç«¯ï¼Œéšæ—¶éšåœ°æŸ¥çœ‹è—å“ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

*   **å‰ç«¯**: React 18, Tailwind CSS, Lucide React (å›¾æ ‡), Vite
*   **åç«¯**: Node.js Serverless Functions (API Routes)
*   **æ•°æ®åº“**: PostgreSQL (Supabase / Neon)
*   **è¿æ¥æ–¹å¼**: 
    *   âœ… **Connection Pooling (æ¨è)**: ä½¿ç”¨ `pg` åº“ç›´è¿ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–å»ºè¡¨ä¸äº‹åŠ¡ç®¡ç†ã€‚
*   **é‰´æƒ**: JWT (JSON Web Token) + BCrypt åŠ å¯†

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®æ¨èä½¿ç”¨ **Vercel** é…åˆ **Supabase** è¿›è¡Œå…è´¹éƒ¨ç½²ã€‚

### æ ¸å¿ƒæ¦‚å¿µï¼šä¸ºä»€ä¹ˆéœ€è¦ Connection Stringï¼Ÿ

Supabase æä¾›ä¸¤ç§è¿æ¥æ–¹å¼ã€‚æœ¬é¡¹ç›®åˆ©ç”¨åç«¯ç›´è¿èƒ½åŠ›å®ç°äº†**è‡ªåŠ¨å»ºè¡¨**ï¼Œå› æ­¤å¼ºçƒˆæ¨èé…ç½® `DATABASE_URL`ï¼š
*   **Connection String (DATABASE_URL)**ï¼šåç«¯ç›´è¿æ•°æ®åº“ã€‚**ä¼˜ç‚¹**æ˜¯æœ¬é¡¹ç›®å¯ä»¥é€šè¿‡ä»£ç **è‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»ºæ•°æ®è¡¨**ï¼ŒçœŸæ­£å®ç°â€œé›¶é—¨æ§›éƒ¨ç½²â€ã€‚

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®åº“ (Supabase)

1.  æ³¨å†Œå¹¶ç™»å½• [Supabase](https://supabase.com)ã€‚
2.  åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® (New Project)ã€‚
3.  è¿›å…¥ **Project Settings** -> **Database**ã€‚
4.  æ‰¾åˆ° **Connection String** -> **URI**ã€‚
5.  **é‡è¦**ï¼šå¤åˆ¶ Mode ä¸º `Transaction` (ç«¯å£ 6543) çš„è¿æ¥å­—ç¬¦ä¸²ã€‚
    *   æ ¼å¼ç¤ºä¾‹ï¼š`postgres://postgres.[ref]:[password]@aws-0-region.pooler.supabase.com:6543/postgres`
    *   *è®°å¾—å°† `[password]` æ›¿æ¢ä¸ºä½ åˆ›å»ºé¡¹ç›®æ—¶è®¾ç½®çš„æ•°æ®åº“å¯†ç ã€‚*

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²ä»£ç  (Vercel)

1.  Fork æœ¬é¡¹ç›®åˆ°ä½ çš„ GitHub ä»“åº“ã€‚
2.  ç™»å½• [Vercel](https://vercel.com)ï¼Œç‚¹å‡» **Add New...** -> **Project**ã€‚
3.  å¯¼å…¥ä½ åˆšåˆš Fork çš„ä»“åº“ã€‚
4.  **å…³é”®æ­¥éª¤**ï¼šåœ¨ **Environment Variables** (ç¯å¢ƒå˜é‡) ä¸­æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

#### åŸºç¡€é…ç½® (å¿…é¡»)

| å˜é‡å | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
| :--- | :---: | :--- | :--- |
| `DATABASE_URL` | âœ… | **æ ¸å¿ƒé…ç½® (åç«¯)**ï¼šPostgreSQL è¿æ¥å­—ç¬¦ä¸²ã€‚ç”¨äºåç«¯ API ç›´è¿æ•°æ®åº“ã€‚ | `postgres://postgres:[PWD]@db.xxx.supabase.co:6543/postgres` |
| `JWT_SECRET` | âœ… | **å®‰å…¨é…ç½®**ï¼šToken åŠ å¯†å¯†é’¥ã€‚**ç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…è®¾ç½®**ã€‚ | `my-super-secret-key-123456` |

#### Supabase SDK é…ç½® (å¯é€‰ - æ¨è)

è™½ç„¶æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨åç«¯ç›´è¿ï¼Œä½†é…ç½®ä»¥ä¸‹å‚æ•°å¯æ¶ˆé™¤å‰ç«¯æ§åˆ¶å°è­¦å‘Šï¼Œå¹¶ä¸ºæœªæ¥æ‰©å±•ï¼ˆå¦‚ä½¿ç”¨ Supabase Storage å­˜å‚¨å›¾ç‰‡ï¼‰åšå‡†å¤‡ã€‚

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
| :--- | :--- | :--- |
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase é¡¹ç›® API åœ°å€ (Project Settings -> API) | `https://your-project.supabase.co` |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase é¡¹ç›®åŒ¿åå…¬é’¥ (Project Settings -> API) | `eyJxh...` |

#### å›¾åºŠé…ç½® (å¯é€‰ - æ¨è CloudFlare-ImgBed)

å¦‚æœä¸é…ç½®ä»¥ä¸‹å‚æ•°ï¼Œå›¾ç‰‡å°†ä»¥ Base64 æ ¼å¼ç›´æ¥å­˜å…¥æ•°æ®åº“ï¼ˆé€‚åˆè½»é‡ä½¿ç”¨ï¼‰ã€‚å¦‚éœ€å¯¹æ¥ [CloudFlare-ImgBed](https://github.com/MarSeventh/CloudFlare-ImgBed) ç­‰å›¾åºŠä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼š

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
| :--- | :--- | :--- |
| `NEXT_PUBLIC_IMAGE_API_URL` | å›¾åºŠä¸Šä¼ æ¥å£åœ°å€ | `https://your-cf-worker.workers.dev/upload` |
| `NEXT_PUBLIC_IMAGE_API_TOKEN` | å›¾åºŠä¸Šä¼  Token | `your-token-here` |

5.  ç‚¹å‡» **Deploy** ç­‰å¾…éƒ¨ç½²å®Œæˆã€‚

### ç¬¬ä¸‰æ­¥ï¼šä¸€é”®åˆå§‹åŒ–

1.  æ‰“å¼€éƒ¨ç½²å¥½çš„ç½‘ç«™åŸŸåã€‚
2.  **é¦–æ¬¡ç™»å½•**ï¼šä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦å·ã€‚
    *   ç”¨æˆ·å: `admin`
    *   å¯†ç : `admin`
3.  ç™»å½•åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ•°æ®åº“ç»“æ„ã€‚è‹¥å¼¹å‡º **çº¢è‰²è­¦å‘Šâ€œæ•°æ®åº“æœªåˆå§‹åŒ–â€**ï¼Œè¯·ç‚¹å‡» **â€œæ‰“å¼€åˆå§‹åŒ–å‘å¯¼â€** -> **â€œç«‹å³ä¿®å¤â€**ã€‚
4.  ç³»ç»Ÿå°†è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰æ•°æ®è¡¨ã€‚é¡µé¢åˆ·æ–°åï¼Œéƒ¨ç½²å®Œæˆï¼

---

## ğŸ›¡ï¸ ä½¿ç”¨è¯´æ˜

### è´¦å·ç®¡ç†
*   **ä¿®æ”¹å¯†ç **ï¼šé¦–æ¬¡ç™»å½•åï¼Œè¯·åŠ¡å¿…ç«‹å³åœ¨â€œè®¾ç½®â€ä¸­ä¿®æ”¹ `admin` çš„é»˜è®¤å¯†ç ã€‚
*   **åˆ›å»ºç”¨æˆ·**ï¼šä½œä¸ºç®¡ç†å‘˜ï¼Œä½ å¯ä»¥åœ¨â€œè®¾ç½® -> ç”¨æˆ·ç®¡ç†â€ä¸­ä¸ºå®¶äººæˆ–æœ‹å‹åˆ›å»ºç‹¬ç«‹çš„è´¦å·ã€‚

### å¸¸è§é—®é¢˜
*   **Q: åˆå§‹åŒ–å¤±è´¥ï¼Œæç¤º "password authentication failed"ï¼Ÿ**
    *   A: æ£€æŸ¥ `DATABASE_URL` ä¸­çš„å¯†ç æ˜¯å¦æ­£ç¡®ã€‚æ³¨æ„ï¼šSupabase çš„æ•°æ®åº“å¯†ç **ä¸æ˜¯**ä½ çš„ç™»å½•å¯†ç ï¼Œè€Œæ˜¯åˆ›å»º Project æ—¶è®¾ç½®çš„é‚£ä¸ªã€‚
*   **Q: å›¾ç‰‡å­˜åœ¨å“ªï¼Ÿ**
    *   A: é»˜è®¤å­˜å…¥ PostgreSQL æ•°æ®åº“ã€‚é…ç½®äº† `NEXT_PUBLIC_IMAGE_API_URL` åå¯æ”¯æŒå¤–éƒ¨å›¾åºŠã€‚

---

## â¤ï¸ é¸£è°¢

æœ¬é¡¹ç›®çš„éƒ¨åˆ†çµæ„Ÿä¸æŠ€æœ¯å®ç°å¾—ç›Šäºå¼€æºç¤¾åŒºçš„æ— ç§è´¡çŒ®ï¼Œç‰¹åˆ«æ„Ÿè°¢ï¼š

*   **[CloudFlare-ImgBed](https://github.com/MarSeventh/CloudFlare-ImgBed)**: å¼€æºå›¾åºŠæ–¹æ¡ˆã€‚

---

## ğŸ“„ å¼€æºåè®®

MIT License

Copyright (c) 2024 Tea Collection Contributors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
